<HTML>
<HEAD>
<TITLE>
mat4.cpp
</TITLE>
</HEAD>
<BODY>
<PRE>
<font color="blue">#include</font> <font color="maroon">&#60;string&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;vector&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;map&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;queue&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;boost/shared_ptr.hpp&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;boost/weak_ptr.hpp&#62;</font>
<font color="blue">using</font> <font color="blue">namespace</font> std;
<font color="blue">#include</font> <font color="maroon">&#60;SDL/SDL.h&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;windows.h&#62;</font>
<font color="blue">#include</font> <font color="maroon">"GLee.h"</font>
<font color="blue">#include</font> <font color="maroon">"FireCube.h"</font>
<font color="blue">using</font> <font color="blue">namespace</font> FireCube;
<font color="blue">#include</font> <font color="maroon">&#60;cmath&#62;</font>

<font color="blue">inline</font> <font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>Identity<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">=</font><font color="maroon">1</font>;
    m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font><font color="maroon">0</font>;
<font color="black">}</font>
<font color="blue">inline</font> <font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>Zero<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>   
    m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">=</font><font color="maroon">0</font>;
<font color="black">}</font>
<font color="blue">inline</font> mat4 mat4<font color="black">:</font><font color="black">:</font><font color="blue">operator</font><font color="black">=</font><font color="black">(</font>mat4 <font color="black">&</font>src<font color="black">)</font>
<font color="black">{</font>
    memcpy<font color="black">(</font>m,src.m,<font color="blue">sizeof</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font><font color="black">*</font><font color="maroon">16</font><font color="black">)</font>;
    <font color="blue">return</font> <font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font>;
<font color="black">}</font>
<font color="blue">inline</font> mat4 mat4<font color="black">:</font><font color="black">:</font><font color="blue">operator</font><font color="black">+</font><font color="black">(</font>mat4 <font color="black">&</font>src<font color="black">)</font>
<font color="black">{</font>
    mat4 ret;
    ret.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">+</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
    <font color="blue">return</font> ret; 
<font color="black">}</font>
<font color="blue">inline</font> mat4 mat4<font color="black">:</font><font color="black">:</font><font color="blue">operator</font><font color="black">-</font><font color="black">(</font>mat4 <font color="black">&</font>src<font color="black">)</font>
<font color="black">{</font>
    mat4 ret;
    ret.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">-</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
    <font color="blue">return</font> ret; 
<font color="black">}</font>
<font color="blue">inline</font> <font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font><font color="blue">operator</font><font color="black">+</font><font color="black">=</font><font color="black">(</font>mat4 <font color="black">&</font>src<font color="black">)</font>
<font color="black">{</font>
    m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font>; 
    m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">+</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
<font color="black">}</font>
<font color="blue">inline</font> <font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font><font color="blue">operator</font><font color="black">-</font><font color="black">=</font><font color="black">(</font>mat4 <font color="black">&</font>src<font color="black">)</font>
<font color="black">{</font>
    m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font>; 
    m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">-</font><font color="black">=</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
<font color="black">}</font>
mat4 mat4<font color="black">:</font><font color="black">:</font><font color="blue">operator</font><font color="black">*</font><font color="black">(</font><font color="blue">float</font> src<font color="black">)</font>
<font color="black">{</font>
    mat4 ret;
    ret.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">*</font>src;
    ret.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">*</font>src;
    <font color="blue">return</font> ret;
<font color="black">}</font>
vec3 mat4<font color="black">:</font><font color="black">:</font><font color="blue">operator</font><font color="black">*</font><font color="black">(</font>vec3 <font color="black">&</font>src<font color="black">)</font>
<font color="black">{</font>
    <font color="blue">return</font> vec3<font color="black">(</font>src.x<font color="black">*</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font>src.y<font color="black">*</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font>src.z<font color="black">*</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font>,src.x<font color="black">*</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font>src.y<font color="black">*</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font>src.z<font color="black">*</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font>,src.x<font color="black">*</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font>src.y<font color="black">*</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font>src.z<font color="black">*</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">)</font>;
<font color="black">}</font>
mat4 mat4<font color="black">:</font><font color="black">:</font><font color="blue">operator</font><font color="black">*</font><font color="black">(</font>mat4 <font color="black">&</font>src<font color="black">)</font>
<font color="black">{</font>
    mat4 ret;
    ret.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;

    ret.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;

    ret.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;

    ret.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;

    <font color="blue">return</font> ret;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font><font color="blue">operator</font><font color="black">*</font><font color="black">=</font><font color="black">(</font>mat4 <font color="black">&</font>src<font color="black">)</font>
<font color="black">{</font>
    mat4 tmp<font color="black">=</font><font color="black">*</font><font color="blue">this</font>; 
    m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;

    m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;

    m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;

    m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">=</font>tmp.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">+</font>tmp.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">*</font>src.m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font>;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>Translate<font color="black">(</font><font color="blue">float</font> x,<font color="blue">float</font> y,<font color="blue">float</font> z<font color="black">)</font>
<font color="black">{</font>
    mat4 trans;
    trans.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font>x;
    trans.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font>y;
    trans.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font>z;
    <font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">=</font><font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">*</font>trans;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>Translate<font color="black">(</font>vec3 t<font color="black">)</font>
<font color="black">{</font>
    Translate<font color="black">(</font>t.x,t.y,t.z<font color="black">)</font>;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>Scale<font color="black">(</font><font color="blue">float</font> x,<font color="blue">float</font> y,<font color="blue">float</font> z<font color="black">)</font>
<font color="black">{</font>
    mat4 scale;
    scale.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>x;
    scale.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>y;
    scale.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>z;
    <font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">=</font><font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">*</font>scale;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>RotateX<font color="black">(</font><font color="blue">float</font> ang<font color="black">)</font>
<font color="black">{</font>
    mat4 rot;
    <font color="blue">float</font> cs<font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font>cos<font color="black">(</font>ang<font color="black">)</font>;
    <font color="blue">float</font> sn<font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font>sin<font color="black">(</font>ang<font color="black">)</font>;

    rot.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>cs;
    rot.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font><font color="black">-</font>sn;
    rot.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">=</font>sn;
    rot.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>cs;
    <font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">=</font><font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">*</font>rot;

<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>RotateY<font color="black">(</font><font color="blue">float</font> ang<font color="black">)</font>
<font color="black">{</font>
    mat4 rot;
    <font color="blue">float</font> cs<font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font>cos<font color="black">(</font>ang<font color="black">)</font>;
    <font color="blue">float</font> sn<font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font>sin<font color="black">(</font>ang<font color="black">)</font>;

    rot.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>cs;
    rot.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>sn;
    rot.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font><font color="black">-</font>sn;
    rot.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>cs;
    <font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">=</font><font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">*</font>rot;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>RotateZ<font color="black">(</font><font color="blue">float</font> ang<font color="black">)</font>
<font color="black">{</font>
    mat4 rot;
    <font color="blue">float</font> cs<font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font>cos<font color="black">(</font>ang<font color="black">)</font>;
    <font color="blue">float</font> sn<font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font>sin<font color="black">(</font>ang<font color="black">)</font>;

    rot.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>cs;
    rot.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font><font color="black">-</font>sn;
    rot.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>sn;
    rot.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>cs;
    <font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">=</font><font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">*</font>rot;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>Rotate<font color="black">(</font>vec4 rot<font color="black">)</font>
<font color="black">{</font>
    mat4 rotm;
    <font color="blue">float</font> c <font color="black">=</font> cos<font color="black">(</font>rot.w<font color="black">)</font>;
    <font color="blue">float</font> s <font color="black">=</font> sin<font color="black">(</font>rot.w<font color="black">)</font>;
    <font color="blue">float</font> t <font color="black">=</font> <font color="maroon">1</font>.0f <font color="black">-</font>c;
    rotm.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>c<font color="black">+</font>rot.x<font color="black">*</font>rot.x<font color="black">*</font>t;
    rotm.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>c<font color="black">+</font>rot.y<font color="black">*</font>rot.y<font color="black">*</font>t;
    rotm.m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font>c<font color="black">+</font>rot.z<font color="black">*</font>rot.z<font color="black">*</font>t;
    
    <font color="blue">float</font> tmp1 <font color="black">=</font> rot.x<font color="black">*</font>rot.y<font color="black">*</font>t;
    <font color="blue">float</font> tmp2 <font color="black">=</font> rot.z<font color="black">*</font>s;
    rotm.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font> <font color="black">=</font> tmp1 <font color="black">+</font> tmp2;
    rotm.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font> <font color="black">=</font> tmp1 <font color="black">-</font>tmp2;
    tmp1 <font color="black">=</font> rot.x<font color="black">*</font>rot.z<font color="black">*</font>t;
    tmp2 <font color="black">=</font> rot.y<font color="black">*</font>s;
    rotm.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font> <font color="black">=</font> tmp1 <font color="black">-</font>tmp2;
    rotm.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font> <font color="black">=</font> tmp1 <font color="black">+</font> tmp2;
    tmp1 <font color="black">=</font> rot.y<font color="black">*</font>rot.z<font color="black">*</font>t;
    tmp2 <font color="black">=</font> rot.x<font color="black">*</font>s;
    rotm.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font> <font color="black">=</font> tmp1 <font color="black">+</font> tmp2;
    rotm.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font> <font color="black">=</font> tmp1 <font color="black">-</font>tmp2;

    <font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">=</font><font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">*</font>rotm;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>Transpose<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    mat4 t<font color="black">=</font><font color="black">*</font><font color="blue">this</font>;
    m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font>;

    m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font>;

    m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font>;

    m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font>;
    m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font>t.m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font>;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>Inverse<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    mat4 <font color="black">&</font>mm<font color="black">=</font><font color="black">*</font><font color="blue">this</font>;
    <font color="blue">float</font> d<font color="black">=</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">+</font>
        mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font>
        mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font>
        mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font>
        mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">+</font>
        mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font>;

    mat4 ret;   
    <font color="blue">if</font><font color="black">(</font> d <font color="black">=</font><font color="black">=</font> <font color="maroon">0</font> <font color="black">)</font> <font color="blue">return</font>;
    d <font color="black">=</font> <font color="maroon">1</font>.0f <font color="black">/</font> d;

    ret<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">)</font>;
    ret<font color="black">(</font><font color="maroon">3</font>,<font color="maroon">3</font><font color="black">)</font> <font color="black">=</font> d <font color="black">*</font> <font color="black">(</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">0</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font><font color="black">)</font> <font color="black">-</font>mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font> <font color="black">+</font> mm<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">*</font>mm<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">)</font>;

    <font color="black">*</font><font color="blue">this</font><font color="black">=</font>ret;
<font color="black">}</font>
vec3 mat4<font color="black">:</font><font color="black">:</font>GetDir<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    vec3 dr<font color="black">(</font><font color="black">-</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font>,<font color="black">-</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font>,<font color="black">-</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">)</font>;
    <font color="blue">return</font> dr;
<font color="black">}</font>

vec3 mat4<font color="black">:</font><font color="black">:</font>GetPos<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    vec3 ps;
    ps.x<font color="black">=</font><font color="black">(</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">*</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">*</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">*</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">)</font>;
    ps.y<font color="black">=</font><font color="black">(</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">*</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">*</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">*</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">)</font>;
    ps.z<font color="black">=</font><font color="black">(</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">*</font>m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">*</font>m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">+</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">*</font>m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">)</font>;
    <font color="blue">return</font> ps;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>GeneratePerspective<font color="black">(</font><font color="blue">float</font> fov,<font color="blue">float</font> aspect,<font color="blue">float</font> nearz,<font color="blue">float</font> farz<font color="black">)</font>
<font color="black">{</font>   
    <font color="blue">float</font> f<font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font><font color="black">(</font>cos<font color="black">(</font>fov<font color="black">/</font><font color="maroon">180</font>.0f<font color="black">*</font>PI<font color="black">/</font><font color="maroon">2</font><font color="black">)</font><font color="black">/</font>sin<font color="black">(</font>fov<font color="black">/</font><font color="maroon">180</font>.0f<font color="black">*</font>PI<font color="black">/</font><font color="maroon">2</font><font color="black">)</font><font color="black">)</font>;
    Identity<font color="black">(</font><font color="black">)</font>;
    m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font><font color="black">(</font>f<font color="black">/</font>aspect<font color="black">)</font>;
    m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>f;
    m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font><font color="black">(</font><font color="black">(</font>farz<font color="black">+</font>nearz<font color="black">)</font><font color="black">/</font><font color="black">(</font>nearz<font color="black">-</font>farz<font color="black">)</font><font color="black">)</font>;
    m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">=</font><font color="maroon">-1</font>;
    m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font><font color="black">(</font><font color="black">(</font><font color="maroon">2</font><font color="black">*</font>farz<font color="black">*</font>nearz<font color="black">)</font><font color="black">/</font><font color="black">(</font>nearz<font color="black">-</font>farz<font color="black">)</font><font color="black">)</font>;
    m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">=</font><font color="maroon">0</font>;
<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>GenerateOrthographic<font color="black">(</font><font color="blue">float</font> left,<font color="blue">float</font> right,<font color="blue">float</font> bottom,<font color="blue">float</font> top,<font color="blue">float</font> zNear,<font color="blue">float</font> zFar<font color="black">)</font>
<font color="black">{</font>   
    <font color="blue">float</font> tx<font color="black">=</font><font color="black">-</font><font color="black">(</font>right<font color="black">+</font>left<font color="black">)</font><font color="black">/</font><font color="black">(</font>right<font color="black">-</font>left<font color="black">)</font>;
    <font color="blue">float</font> ty<font color="black">=</font><font color="black">-</font><font color="black">(</font>top<font color="black">+</font>bottom<font color="black">)</font><font color="black">/</font><font color="black">(</font>top<font color="black">-</font>bottom<font color="black">)</font>;
    <font color="blue">float</font> tz<font color="black">=</font><font color="black">-</font><font color="black">(</font>zFar<font color="black">+</font>zNear<font color="black">)</font><font color="black">/</font><font color="black">(</font>zFar<font color="black">-</font>zNear<font color="black">)</font>;
    Identity<font color="black">(</font><font color="black">)</font>;
    m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font><font color="maroon">2</font><font color="black">/</font><font color="black">(</font>right<font color="black">-</font>left<font color="black">)</font>;
    m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font><font color="maroon">2</font><font color="black">/</font><font color="black">(</font>top<font color="black">-</font>bottom<font color="black">)</font>;
    m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font><font color="maroon">-2</font><font color="black">/</font><font color="black">(</font>zFar<font color="black">-</font>zNear<font color="black">)</font>;  
    m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font>tx;
    m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font>ty;
    m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font>tz;

<font color="black">}</font>
<font color="blue">void</font> mat4<font color="black">:</font><font color="black">:</font>LookAt<font color="black">(</font>vec3 pos,vec3 at,vec3 up<font color="black">)</font>
<font color="black">{</font>
    mat4 trans;
    vec3 f<font color="black">=</font>at<font color="black">-</font>pos;

    up.Normalize<font color="black">(</font><font color="black">)</font>;
    f.Normalize<font color="black">(</font><font color="black">)</font>;
    vec3 s;
    vec3 u; 
    <font color="blue">if</font> <font color="black">(</font><font color="black">(</font>up<font color="black">=</font><font color="black">=</font>f<font color="black">)</font> <font color="black">|</font><font color="black">|</font> <font color="black">(</font>up<font color="black">=</font><font color="black">=</font>f<font color="black">*</font><font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>
    <font color="black">{</font>
        up.Set<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">-1</font><font color="black">)</font>;
    <font color="black">}</font>
    s.Cross<font color="black">(</font>f,up<font color="black">)</font>;
    u.Cross<font color="black">(</font>s,f<font color="black">)</font>;
    s.Normalize<font color="black">(</font><font color="black">)</font>;
    u.Normalize<font color="black">(</font><font color="black">)</font>;



    m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>s.x; m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>s.y; m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>s.z; m<font color="black">[</font><font color="maroon">12</font><font color="black">]</font><font color="black">=</font><font color="maroon">0</font>;
    m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>u.x; m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>u.y; m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font><font color="black">=</font>u.z; m<font color="black">[</font><font color="maroon">13</font><font color="black">]</font><font color="black">=</font><font color="maroon">0</font>;
    m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font><font color="black">-</font>f.x; m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font><font color="black">-</font>f.y; m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font><font color="black">=</font><font color="black">-</font>f.z; m<font color="black">[</font><font color="maroon">14</font><font color="black">]</font><font color="black">=</font><font color="maroon">0</font>;
    m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font><font color="maroon">0</font>; m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font><font color="maroon">0</font>; m<font color="black">[</font><font color="maroon">11</font><font color="black">]</font><font color="black">=</font><font color="maroon">0</font>; m<font color="black">[</font><font color="maroon">15</font><font color="black">]</font><font color="black">=</font><font color="maroon">1</font>;

    trans.Translate<font color="black">(</font><font color="black">-</font>pos.x,<font color="black">-</font>pos.y,<font color="black">-</font>pos.z<font color="black">)</font>;
    <font color="black">(</font><font color="black">*</font><font color="blue">this</font><font color="black">)</font><font color="black">*</font><font color="black">=</font>trans;
<font color="black">}</font>
mat4<font color="black">:</font><font color="black">:</font><font color="blue">operator</font> mat3<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    mat3 ret;

    ret.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font>;

    <font color="blue">return</font> ret;
<font color="black">}</font>
mat3 mat4<font color="black">:</font><font color="black">:</font>ToMatrix3<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    mat3 ret;

    ret.m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">0</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">1</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">2</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">3</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">4</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">5</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">6</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">7</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">9</font><font color="black">]</font>;
    ret.m<font color="black">[</font><font color="maroon">8</font><font color="black">]</font><font color="black">=</font>m<font color="black">[</font><font color="maroon">10</font><font color="black">]</font>;

    <font color="blue">return</font> ret;
<font color="black">}</font>
</PRE>
</BODY>
</HTML>
