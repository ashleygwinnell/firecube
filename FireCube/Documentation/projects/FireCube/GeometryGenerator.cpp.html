<HTML>
<HEAD>
<TITLE>
GeometryGenerator.cpp
</TITLE>
</HEAD>
<BODY>
<PRE>
<font color="blue">#include</font> <font color="maroon">&#60;string&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;vector&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;map&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;queue&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;fstream&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;sstream&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;boost/shared_ptr.hpp&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;boost/weak_ptr.hpp&#62;</font>
<font color="blue">using</font> <font color="blue">namespace</font> std;
<font color="blue">#include</font> <font color="maroon">&#60;SDL.h&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;windows.h&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;ft2build.h&#62;</font>
<font color="blue">#include</font> FT_FREETYPE_H
<font color="blue">#include</font> <font color="maroon">"GLee.h"</font>

<font color="blue">#include</font> <font color="maroon">"utils.h"</font>  
<font color="blue">#include</font> <font color="maroon">"Logger.h"</font>
<font color="blue">#include</font> <font color="maroon">"ResourceManager.h"</font>
<font color="blue">#include</font> <font color="maroon">"Timer.h"</font>
<font color="blue">#include</font> <font color="maroon">"MyMath.h"</font> 
<font color="blue">#include</font> <font color="maroon">"BoundingBox.h"</font>
<font color="blue">#include</font> <font color="maroon">"Texture.h"</font>        
<font color="blue">#include</font> <font color="maroon">"Buffer.h"</font>
<font color="blue">#include</font> <font color="maroon">"Shaders.h"</font>
<font color="blue">#include</font> <font color="maroon">"Geometry.h"</font>   
<font color="blue">#include</font> <font color="maroon">"FrameBuffer.h"</font>
<font color="blue">#include</font> <font color="maroon">"Image.h"</font>
<font color="blue">#include</font> <font color="maroon">"Font.h"</font>
<font color="blue">#include</font> <font color="maroon">"RenderQueue.h"</font>
<font color="blue">#include</font> <font color="maroon">"Renderer.h"</font>
<font color="blue">#include</font> <font color="maroon">"Application.h"</font>
<font color="blue">#include</font> <font color="maroon">"privateFont.h"</font>
<font color="blue">#include</font> <font color="maroon">"Light.h"</font>
<font color="blue">#include</font> <font color="maroon">"Node.h"</font>
<font color="blue">#include</font> <font color="maroon">"GeometryGenerator.h"</font>

<font color="blue">using</font> <font color="blue">namespace</font> FireCube;

Material CreateDefaultMaterial<font color="black">(</font><font color="black">)</font>
<font color="black">{</font>
    Material material;
    material.Create<font color="black">(</font><font color="black">)</font>;
    material.SetName<font color="black">(</font><font color="maroon">"Default"</font><font color="black">)</font>;
    material.SetAmbientColor<font color="black">(</font>vec4<font color="black">(</font><font color="maroon">0</font>.3f,<font color="maroon">0</font>.3f,<font color="maroon">0</font>.3f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    material.SetDiffuseColor<font color="black">(</font>vec4<font color="black">(</font><font color="maroon">0</font>.7f,<font color="maroon">0</font>.7f,<font color="maroon">0</font>.7f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    material.SetSpecularColor<font color="black">(</font>vec4<font color="black">(</font><font color="maroon">0</font>.2f,<font color="maroon">0</font>.2f,<font color="maroon">0</font>.2f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    material.SetShininess<font color="black">(</font><font color="maroon">50</font>.0f<font color="black">)</font>;
    <font color="blue">return</font> material;
<font color="black">}</font>

Geometry FIRECUBE_API GeometryGenerator<font color="black">:</font><font color="black">:</font>GenerateBox<font color="black">(</font>vec3 size,Material material<font color="black">)</font>
<font color="black">{</font>
    Geometry ret;
    ret.Create<font color="black">(</font><font color="black">)</font>;
    size<font color="black">=</font>size<font color="black">*</font><font color="maroon">0</font>.5f;

    <font color="green">// Front</font>
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,<font color="black">-</font>size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,<font color="black">-</font>size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-4</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">1</font><font color="black">)</font>;   
    <font color="green">// Back</font>
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,<font color="black">-</font>size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,<font color="black">-</font>size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-4</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">-1</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">0</font>,<font color="maroon">-1</font><font color="black">)</font>;
    <font color="green">// Left</font>
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,<font color="black">-</font>size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,<font color="black">-</font>size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">-1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">-1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">-1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">-1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-4</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">-1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">-1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font>;
    <font color="green">// Right</font>
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,<font color="black">-</font>size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,<font color="black">-</font>size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-4</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">1</font>,<font color="maroon">0</font>,<font color="maroon">0</font><font color="black">)</font>;
    <font color="green">// Top</font>
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-4</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font>;   
    <font color="green">// Bottom</font>
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,<font color="black">-</font>size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,<font color="black">-</font>size.y,<font color="black">-</font>size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,<font color="black">-</font>size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,<font color="black">-</font>size.y,size.z<font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">-1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">-1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">-1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">-1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-4</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">-1</font>,<font color="maroon">0</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-2</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-3</font>,ret.GetVertices<font color="black">(</font><font color="black">)</font>.size<font color="black">(</font><font color="black">)</font><font color="maroon">-1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">-1</font>,<font color="maroon">0</font><font color="black">)</font>;
    
    ret.GetSurfaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Surface<font color="black">(</font><font color="black">)</font><font color="black">)</font>;
    ret.GetSurfaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.face<font color="black">=</font>ret.GetFaces<font color="black">(</font><font color="black">)</font>;
    ret.GetSurfaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.material<font color="black">=</font>material;
    ret.GetMaterials<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>material<font color="black">)</font>;
    ret.UpdateBuffers<font color="black">(</font><font color="black">)</font>;
    <font color="blue">return</font> ret;
<font color="black">}</font>
Geometry FIRECUBE_API GeometryGenerator<font color="black">:</font><font color="black">:</font>GenerateBox<font color="black">(</font>vec3 size<font color="black">)</font>
<font color="black">{</font>
    <font color="blue">return</font> GenerateBox<font color="black">(</font>size,CreateDefaultMaterial<font color="black">(</font><font color="black">)</font><font color="black">)</font>;
<font color="black">}</font>

Geometry FIRECUBE_API GeometryGenerator<font color="black">:</font><font color="black">:</font>GenerateSphere <font color="black">(</font><font color="blue">float</font> radius,<font color="blue">unsigned</font> <font color="blue">int</font> rings, <font color="blue">unsigned</font> <font color="blue">int</font> columns,Material material<font color="black">)</font> 
<font color="black">{</font>
    Geometry ret;
    ret.Create<font color="black">(</font><font color="black">)</font>;
    vector<font color="black">&#60;</font><font color="blue">unsigned</font> <font color="blue">int</font><font color="black">&#62;</font> indices;

    ret.GetVertices<font color="black">(</font><font color="black">)</font>.reserve<font color="black">(</font><font color="black">(</font>rings <font color="black">+</font> <font color="maroon">1</font><font color="black">)</font> <font color="black">*</font> <font color="black">(</font>columns <font color="black">+</font> <font color="maroon">1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.reserve<font color="black">(</font><font color="black">(</font>rings <font color="black">+</font> <font color="maroon">1</font><font color="black">)</font> <font color="black">*</font> <font color="black">(</font>columns <font color="black">+</font> <font color="maroon">1</font><font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.reserve<font color="black">(</font><font color="black">(</font>rings <font color="black">+</font> <font color="maroon">1</font><font color="black">)</font> <font color="black">*</font> <font color="black">(</font>columns <font color="black">+</font> <font color="maroon">1</font><font color="black">)</font><font color="black">)</font>;
    indices.reserve<font color="black">(</font><font color="maroon">2</font> <font color="black">*</font> rings <font color="black">*</font> <font color="black">(</font>columns <font color="black">+</font> <font color="maroon">1</font><font color="black">)</font><font color="black">)</font>;

    <font color="blue">const</font> <font color="blue">float</font> fDeltaRingAngle <font color="black">=</font> <font color="black">(</font><font color="blue">float</font><font color="black">)</font>PI <font color="black">/</font> rings;
    <font color="blue">const</font> <font color="blue">float</font> fDeltacolumnAngle <font color="black">=</font> <font color="maroon">2</font> <font color="black">*</font> <font color="black">(</font><font color="blue">float</font><font color="black">)</font>PI <font color="black">/</font> columns;

    <font color="blue">unsigned</font> <font color="blue">int</font> vertexIndex <font color="black">=</font> <font color="maroon">0</font>;

    <font color="blue">for</font><font color="black">(</font><font color="blue">unsigned</font> <font color="blue">int</font> ring <font color="black">=</font> <font color="maroon">0</font>; ring <font color="black">&#60;</font> rings <font color="black">+</font> <font color="maroon">1</font> ; ring<font color="black">+</font><font color="black">+</font><font color="black">)</font>
    <font color="black">{</font>
        <font color="blue">const</font> <font color="blue">float</font> r0 <font color="black">=</font> std<font color="black">:</font><font color="black">:</font>sin<font color="black">(</font>ring <font color="black">*</font> fDeltaRingAngle<font color="black">)</font>;
        <font color="blue">const</font> <font color="blue">float</font> y0 <font color="black">=</font> std<font color="black">:</font><font color="black">:</font>cos<font color="black">(</font>ring <font color="black">*</font> fDeltaRingAngle<font color="black">)</font>;

        <font color="blue">for</font><font color="black">(</font><font color="blue">unsigned</font> column <font color="black">=</font> <font color="maroon">0</font>; column <font color="black">&#60;</font> columns <font color="black">+</font> <font color="maroon">1</font> ; column<font color="black">+</font><font color="black">+</font><font color="black">)</font>
        <font color="black">{</font>
            vec3 pos<font color="black">(</font><font color="black">-</font>r0 <font color="black">*</font> std<font color="black">:</font><font color="black">:</font>sin<font color="black">(</font>column <font color="black">*</font> fDeltacolumnAngle<font color="black">)</font>, y0, <font color="black">-</font>r0 <font color="black">*</font> std<font color="black">:</font><font color="black">:</font>cos<font color="black">(</font>column <font color="black">*</font> fDeltacolumnAngle<font color="black">)</font><font color="black">)</font>;
            vec2 uv<font color="black">(</font>column <font color="black">/</font> <font color="black">(</font><font color="blue">float</font><font color="black">)</font>columns, ring <font color="black">/</font> <font color="black">(</font><font color="blue">float</font><font color="black">)</font> rings<font color="black">)</font>;

            ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>pos <font color="black">*</font> radius<font color="black">)</font>;
            ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>pos.Normalize<font color="black">(</font><font color="black">)</font><font color="black">)</font>;
            ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>uv<font color="black">)</font>;
            <font color="blue">if</font><font color="black">(</font>ring <font color="black">&#60;</font> rings<font color="black">)</font>
            <font color="black">{</font>
                indices.push_back<font color="black">(</font>vertexIndex<font color="black">)</font>;
                indices.push_back<font color="black">(</font>vertexIndex <font color="black">+</font> columns <font color="black">+</font> <font color="maroon">1</font><font color="black">)</font>;
                <font color="black">+</font><font color="black">+</font>vertexIndex;
            <font color="black">}</font>
        <font color="black">}</font>
    <font color="black">}</font>
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font>indices<font color="black">[</font><font color="maroon">0</font><font color="black">]</font>,indices<font color="black">[</font><font color="maroon">1</font><font color="black">]</font>,indices<font color="black">[</font><font color="maroon">2</font><font color="black">]</font><font color="black">)</font><font color="black">)</font>;
    <font color="blue">for</font> <font color="black">(</font><font color="blue">unsigned</font> <font color="blue">int</font> i<font color="black">=</font><font color="maroon">3</font>;i<font color="black">&#60;</font>indices.size<font color="black">(</font><font color="black">)</font>;i<font color="black">+</font><font color="black">+</font><font color="black">)</font>
    <font color="black">{</font>
        <font color="blue">if</font> <font color="black">(</font>i%<font color="maroon">2</font><font color="black">=</font><font color="black">=</font><font color="maroon">1</font><font color="black">)</font>
        <font color="black">{</font>       
            Face f<font color="black">(</font>indices<font color="black">[</font>i<font color="maroon">-1</font><font color="black">]</font>,indices<font color="black">[</font>i<font color="maroon">-2</font><font color="black">]</font>,indices<font color="black">[</font>i<font color="black">]</font><font color="black">)</font>;
            ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>f<font color="black">)</font>;
        <font color="black">}</font>
        <font color="blue">else</font>
        <font color="black">{</font>
            Face f<font color="black">(</font>indices<font color="black">[</font>i<font color="maroon">-2</font><font color="black">]</font>,indices<font color="black">[</font>i<font color="maroon">-1</font><font color="black">]</font>,indices<font color="black">[</font>i<font color="black">]</font><font color="black">)</font>;
            ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>f<font color="black">)</font>;
        <font color="black">}</font>
    <font color="black">}</font>
    ret.GetSurfaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Surface<font color="black">(</font><font color="black">)</font><font color="black">)</font>; 
    ret.GetSurfaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.face<font color="black">=</font>ret.GetFaces<font color="black">(</font><font color="black">)</font>;
    ret.GetSurfaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.material<font color="black">=</font>material;
    ret.GetMaterials<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>material<font color="black">)</font>;
    ret.UpdateBuffers<font color="black">(</font><font color="black">)</font>;
    <font color="blue">return</font> ret;
<font color="black">}</font>
Geometry FIRECUBE_API GeometryGenerator<font color="black">:</font><font color="black">:</font>GenerateSphere <font color="black">(</font><font color="blue">float</font> radius,<font color="blue">unsigned</font> <font color="blue">int</font> rings, <font color="blue">unsigned</font> <font color="blue">int</font> columns<font color="black">)</font> 
<font color="black">{</font>
    <font color="blue">return</font> GenerateSphere<font color="black">(</font>radius,rings,columns,CreateDefaultMaterial<font color="black">(</font><font color="black">)</font><font color="black">)</font>;
<font color="black">}</font>
Geometry FIRECUBE_API GeometryGenerator<font color="black">:</font><font color="black">:</font>GeneratePlane<font color="black">(</font>vec2 size<font color="black">)</font>
<font color="black">{</font>
    <font color="blue">return</font> GeneratePlane<font color="black">(</font>size,CreateDefaultMaterial<font color="black">(</font><font color="black">)</font><font color="black">)</font>;
<font color="black">}</font>
Geometry FIRECUBE_API GeometryGenerator<font color="black">:</font><font color="black">:</font>GeneratePlane<font color="black">(</font>vec2 size,Material material<font color="black">)</font>
<font color="black">{</font>
    Geometry ret;
    ret.Create<font color="black">(</font><font color="black">)</font>;
    size<font color="black">=</font>size<font color="black">*</font><font color="maroon">0</font>.5f;

    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,<font color="maroon">0</font>,size.y<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,<font color="maroon">0</font>,size.y<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="black">-</font>size.x,<font color="maroon">0</font>,<font color="black">-</font>size.y<font color="black">)</font><font color="black">)</font>;
    ret.GetVertices<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font>size.x,<font color="maroon">0</font>,<font color="black">-</font>size.y<font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetNormals<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">1</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">0</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetDiffuseUV<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>vec2<font color="black">(</font><font color="maroon">1</font>.0f,<font color="maroon">0</font>.0f<font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">2</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Face<font color="black">(</font><font color="maroon">2</font>,<font color="maroon">1</font>,<font color="maroon">3</font><font color="black">)</font><font color="black">)</font>;
    ret.GetFaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.normal<font color="black">=</font>vec3<font color="black">(</font><font color="maroon">0</font>,<font color="maroon">1</font>,<font color="maroon">0</font><font color="black">)</font>;       

    ret.GetSurfaces<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>Surface<font color="black">(</font><font color="black">)</font><font color="black">)</font>;
    ret.GetSurfaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.face<font color="black">=</font>ret.GetFaces<font color="black">(</font><font color="black">)</font>;
    ret.GetSurfaces<font color="black">(</font><font color="black">)</font>.back<font color="black">(</font><font color="black">)</font>.material<font color="black">=</font>material;
    ret.GetMaterials<font color="black">(</font><font color="black">)</font>.push_back<font color="black">(</font>material<font color="black">)</font>;
    ret.UpdateBuffers<font color="black">(</font><font color="black">)</font>;
    <font color="blue">return</font> ret;
<font color="black">}</font>
</PRE>
</BODY>
</HTML>
