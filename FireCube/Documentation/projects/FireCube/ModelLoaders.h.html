<HTML>
<HEAD>
<TITLE>
ModelLoaders.h
</TITLE>
</HEAD>
<BODY>
<PRE>
<font color="blue">#ifndef</font> MODELLOADERS_H
<font color="blue">#define</font> MODELLOADERS_H

<font color="blue">#pragma</font> <font color="blue">warning</font><font color="black">(</font>push<font color="black">)</font>
<font color="blue">#pragma</font> <font color="blue">warning</font><font color="black">(</font>disable<font color="black">:</font><font color="maroon">4251</font><font color="black">)</font>

<font color="blue">#define</font> PRIMARY <font color="maroon">0x4d4d</font>
<font color="blue">#define</font> EDIT3DS <font color="maroon">0x3d3d</font>
<font color="blue">#define</font> KEYF3DS <font color="maroon">0xb000</font>

<font color="blue">#define</font> NAMED_OBJECT <font color="maroon">0x4000</font>
<font color="blue">#define</font> OBJ_MESH <font color="maroon">0x4100</font>
<font color="blue">#define</font> MESH_VERTICES <font color="maroon">0x4110</font>
<font color="blue">#define</font> MESH_FACES <font color="maroon">0x4120</font>
<font color="blue">#define</font> MESH_MATERIAL <font color="maroon">0x4130</font>
<font color="blue">#define</font> MESH_TEX_VERT <font color="maroon">0x4140</font>

<font color="blue">#define</font> MATERIAL <font color="maroon">0xafff</font>
<font color="blue">#define</font> MAT_NAME <font color="maroon">0xa000</font>
<font color="blue">#define</font> MAT_AMBIENT <font color="maroon">0xa010</font>
<font color="blue">#define</font> MAT_DIFFUSE <font color="maroon">0xa020</font>
<font color="blue">#define</font> MAT_SPECULAR <font color="maroon">0xa030</font>
<font color="blue">#define</font> MAT_SHININESS <font color="maroon">0xa040</font>
<font color="blue">#define</font> MAT_TEXMAP <font color="maroon">0xa200</font>
<font color="blue">#define</font> MAT_TEXFLNM <font color="maroon">0xa300</font>
<font color="blue">#define</font> MAT_SHIN2PCT <font color="maroon">0xa041</font>
<font color="blue">#define</font> MAT_SHIN3PCT <font color="maroon">0xa042</font>

<font color="blue">class</font> M3dsLoader
<font color="black">{</font>
<font color="blue">public</font><font color="black">:</font>
    M3dsLoader<font color="black">(</font>ModelResource <font color="black">*</font>model<font color="black">)</font>;
    <font color="blue">bool</font> Load<font color="black">(</font><font color="blue">const</font> string <font color="black">&</font>filename<font color="black">)</font>;
<font color="blue">private</font><font color="black">:</font>
    DWORD ProcessChunk<font color="black">(</font><font color="blue">char</font> <font color="black">*</font>buffer<font color="black">)</font>;
    ModelResource <font color="black">*</font>model;
<font color="black">}</font>;

<font color="blue">class</font> ColladaLoader
<font color="black">{</font>
<font color="blue">public</font><font color="black">:</font>
    <font color="blue">class</font> Source
    <font color="black">{</font>
    <font color="blue">public</font><font color="black">:</font>
        vector <font color="black">&#60;</font><font color="blue">float</font><font color="black">&#62;</font> floatArray;
        DWORD stride;
    <font color="black">}</font>;
    ColladaLoader<font color="black">(</font>ModelResource <font color="black">*</font>model<font color="black">)</font>;
    <font color="blue">bool</font> Load<font color="black">(</font><font color="blue">const</font> string <font color="black">&</font>filename<font color="black">)</font>;
<font color="blue">private</font><font color="black">:</font>    
    Material LoadMaterial<font color="black">(</font><font color="blue">const</font> string <font color="black">&</font><font color="blue">name</font>,map<font color="black">&#60;</font>string,pair<font color="black">&#60;</font>string,DWORD<font color="black">&#62;</font><font color="black">&#62;</font> <font color="black">&</font>vertexInput<font color="black">)</font>;
    <font color="blue">void</font> LoadMesh<font color="black">(</font>string <font color="black">&</font>id,mat4 transform, map<font color="black">&#60;</font>string,string<font color="black">&#62;</font> <font color="black">&</font>materialMap,map<font color="black">&#60;</font>string,pair<font color="black">&#60;</font>string,DWORD<font color="black">&#62;</font><font color="black">&#62;</font> <font color="black">&</font>vertexInput<font color="black">)</font>;
    <font color="blue">void</font> LoadNodes<font color="black">(</font><font color="black">)</font>;
    <font color="blue">void</font> LoadImageMap<font color="black">(</font><font color="black">)</font>;
    vec4 ReadColor<font color="black">(</font>daeElement <font color="black">*</font>elm<font color="black">)</font>;
    <font color="blue">bool</font> ReadTexture<font color="black">(</font>daeElement <font color="black">*</font>elm,map<font color="black">&#60;</font>string,pair<font color="black">&#60;</font>string,DWORD<font color="black">&#62;</font><font color="black">&#62;</font> <font color="black">&</font>vertexInput,string <font color="black">&</font>file,DWORD <font color="black">&</font>unit<font color="black">)</font>;
    mat4 ReadTransformation<font color="black">(</font>domNode <font color="black">*</font>node<font color="black">)</font>;
    Source ReadSource<font color="black">(</font>domSourceRef source<font color="black">)</font>;
    vector<font color="black">&#60;</font>vec4<font color="black">&#62;</font> SourceToVecArray<font color="black">(</font><font color="blue">const</font> Source <font color="black">&</font>source<font color="black">)</font>;    
    Material GetMaterialByName<font color="black">(</font>string <font color="black">&</font><font color="blue">name</font><font color="black">)</font>;   
    DAE colladaDom;
    ModelResource <font color="black">*</font>model;
    map<font color="black">&#60;</font>string,string<font color="black">&#62;</font> imageMap;
    string basepath;
<font color="black">}</font>;

<font color="blue">#pragma</font> <font color="blue">warning</font><font color="black">(</font>pop<font color="black">)</font>
<font color="blue">#endif</font>
</PRE>
</BODY>
</HTML>
