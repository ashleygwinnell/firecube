<HTML>
<HEAD>
<TITLE>
utils.cpp
</TITLE>
</HEAD>
<BODY>
<PRE>
<font color="blue">#include</font> <font color="maroon">&#60;string&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;vector&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;map&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;queue&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;fstream&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;boost/shared_ptr.hpp&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;boost/weak_ptr.hpp&#62;</font>
<font color="blue">using</font> <font color="blue">namespace</font> std;
<font color="blue">#include</font> <font color="maroon">&#60;SDL/SDL.h&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;windows.h&#62;</font>
<font color="blue">#include</font> <font color="maroon">"GLee.h"</font>
<font color="blue">#include</font> <font color="maroon">"FireCube.h"</font>
<font color="blue">using</font> <font color="blue">namespace</font> FireCube;

<font color="blue">inline</font> <font color="blue">bool</font> FireCube<font color="black">:</font><font color="black">:</font>IsFinite<font color="black">(</font><font color="blue">float</font> val<font color="black">)</font>
<font color="black">{</font>
    <font color="blue">return</font> <font color="black">(</font><font color="black">(</font>val <font color="black">&#60;</font> 1e8<font color="black">)</font> <font color="black">&</font><font color="black">&</font> <font color="black">(</font>val <font color="black">&#62;</font> <font color="maroon">-1</font>e8<font color="black">)</font><font color="black">)</font>;
<font color="black">}</font>
<font color="blue">inline</font> <font color="blue">float</font> FireCube<font color="black">:</font><font color="black">:</font>RangedRandom<font color="black">(</font><font color="blue">float</font> v1,<font color="blue">float</font> v2<font color="black">)</font>
<font color="black">{</font>
    <font color="blue">return</font> v1 <font color="black">+</font> <font color="black">(</font>v2<font color="black">-</font>v1<font color="black">)</font><font color="black">*</font><font color="black">(</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font>rand<font color="black">(</font><font color="black">)</font><font color="black">)</font><font color="black">/</font><font color="black">(</font><font color="black">(</font><font color="blue">float</font><font color="black">)</font>RAND_MAX<font color="black">)</font>;
<font color="black">}</font>
string FireCube<font color="black">:</font><font color="black">:</font>ToLower<font color="black">(</font><font color="blue">const</font> string <font color="black">&</font>str<font color="black">)</font>
<font color="black">{</font>
    string ret;
    string<font color="black">:</font><font color="black">:</font>const_iterator i<font color="black">=</font>str.begin<font color="black">(</font><font color="black">)</font>;
    <font color="blue">for</font> <font color="black">(</font>;i<font color="black">!</font><font color="black">=</font>str.end<font color="black">(</font><font color="black">)</font>;i<font color="black">+</font><font color="black">+</font><font color="black">)</font>
        ret<font color="black">+</font><font color="black">=</font>tolower<font color="black">(</font><font color="black">*</font>i<font color="black">)</font>;
    <font color="blue">return</font> ret;
<font color="black">}</font>
string FireCube<font color="black">:</font><font color="black">:</font>ToUpper<font color="black">(</font><font color="blue">const</font> string <font color="black">&</font>str<font color="black">)</font>
<font color="black">{</font>
    string ret;
    string<font color="black">:</font><font color="black">:</font>const_iterator i<font color="black">=</font>str.begin<font color="black">(</font><font color="black">)</font>;
    <font color="blue">for</font> <font color="black">(</font>;i<font color="black">!</font><font color="black">=</font>str.end<font color="black">(</font><font color="black">)</font>;i<font color="black">+</font><font color="black">+</font><font color="black">)</font>
        ret<font color="black">+</font><font color="black">=</font>toupper<font color="black">(</font><font color="black">*</font>i<font color="black">)</font>;
    <font color="blue">return</font> ret;
<font color="black">}</font>
string FireCube<font color="black">:</font><font color="black">:</font>GetFileName<font color="black">(</font><font color="blue">const</font> string <font color="black">&</font>file<font color="black">)</font>
<font color="black">{</font>
    string<font color="black">:</font><font color="black">:</font>size_type i<font color="black">=</font>file.find_last_of<font color="black">(</font><font color="maroon">"/"</font><font color="black">)</font>;
    string<font color="black">:</font><font color="black">:</font>size_type i2<font color="black">=</font>file.find_last_of<font color="black">(</font><font color="maroon">"\\"</font><font color="black">)</font>;
    string<font color="black">:</font><font color="black">:</font>size_type maxi<font color="black">=</font><font color="maroon">0</font>;
    
    <font color="blue">if</font> <font color="black">(</font><font color="black">(</font>i<font color="black">!</font><font color="black">=</font>string<font color="black">:</font><font color="black">:</font>npos<font color="black">)</font> <font color="black">&</font><font color="black">&</font> <font color="black">(</font>i2<font color="black">!</font><font color="black">=</font>string<font color="black">:</font><font color="black">:</font>npos<font color="black">)</font><font color="black">)</font>
    <font color="black">{</font>
        maxi<font color="black">=</font>i<font color="black">&#62;</font>i2 ? i<font color="black">+</font><font color="maroon">1</font> <font color="black">:</font> i2<font color="black">+</font><font color="maroon">1</font>;
    <font color="black">}</font>
    <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>i<font color="black">!</font><font color="black">=</font>string<font color="black">:</font><font color="black">:</font>npos<font color="black">)</font>
        maxi<font color="black">=</font>i<font color="black">+</font><font color="maroon">1</font>;
    <font color="blue">else</font> <font color="blue">if</font> <font color="black">(</font>i2<font color="black">!</font><font color="black">=</font>string<font color="black">:</font><font color="black">:</font>npos<font color="black">)</font>
        maxi<font color="black">=</font>i2<font color="black">+</font><font color="maroon">1</font>;

    <font color="blue">return</font> file.substr<font color="black">(</font>maxi<font color="black">)</font>;
<font color="black">}</font>
<font color="blue">bool</font> FireCube<font color="black">:</font><font color="black">:</font>FileExists<font color="black">(</font><font color="blue">const</font> string <font color="black">&</font>file<font color="black">)</font>
<font color="black">{</font>
    ifstream f<font color="black">(</font>file.c_str<font color="black">(</font><font color="black">)</font>,ios<font color="black">:</font><font color="black">:</font>binary<font color="black">)</font>;
    <font color="blue">if</font> <font color="black">(</font>f.is_open<font color="black">(</font><font color="black">)</font><font color="black">)</font>
    <font color="black">{</font>
        f.close<font color="black">(</font><font color="black">)</font>;
        <font color="blue">return</font> <font color="blue">true</font>;
    <font color="black">}</font>
    <font color="blue">return</font> <font color="blue">false</font>;
<font color="black">}</font>
</PRE>
</BODY>
</HTML>
